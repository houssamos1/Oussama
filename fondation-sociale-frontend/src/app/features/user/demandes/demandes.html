<div class="max-w-4xl mx-auto">
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900 mb-2">Nouvelle Demande</h1>
    <p class="text-gray-600">Déposez votre demande de prestation sociale</p>
  </div>

  <!-- Étapes du formulaire -->
  <div class="bg-white rounded-lg card-shadow p-6 mb-8">
    <div class="flex items-center justify-between">
      <div *ngFor="let etape of etapesFormulaire; let last = last" class="flex items-center">
        <div class="flex items-center">
          <div class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium"
               [class]="etape.active ? 'bg-primary-600 text-white' : 'bg-gray-300 text-gray-600'">
            {{ etape.numero }}
          </div>
          <span class="ml-3 font-medium"
                [class]="etape.active ? 'text-primary-600' : 'text-gray-600'">
            {{ etape.titre }}
          </span>
        </div>
        <div *ngIf="!last" class="flex-1 h-px bg-gray-300 mx-4"></div>
      </div>
    </div>
  </div>

  <!-- Formulaire -->
  <div class="bg-white rounded-2xl card-shadow p-8 mb-12">
    <h2 class="text-xl font-semibold text-gray-900 mb-6">Sélectionnez le type de prestation</h2>
    
    <div class="grid md:grid-cols-2 gap-6 mb-8">
      <label *ngFor="let prestation of prestationsDisponibles"
             class="flex items-center p-6 border-2 rounded-xl cursor-pointer hover:border-primary-300 transition-colors"
             [class]="nouvelleDemande.prestationId === prestation.id.toString() ? 'border-primary-500 bg-primary-50' : 'border-gray-200'">
        <input type="radio" 
               [value]="prestation.id"
               [(ngModel)]="nouvelleDemande.prestationId"
               name="prestation" 
               class="mr-4 text-primary-600">
        <div class="flex items-center">
          <div class="w-12 h-12 rounded-lg flex items-center justify-center mr-4" [ngClass]="prestation.couleur">
            <i [class]="prestation.icone + ' text-xl'"></i>
          </div>
          <div>
            <h3 class="font-semibold text-gray-900">{{ prestation.nom }}</h3>
            <p class="text-sm text-gray-600">{{ prestation.description }}</p>
          </div>
        </div>
      </label>
    </div>

    <!-- Informations complémentaires -->
    <div class="space-y-6 mb-8">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Motif de la demande</label>
        <textarea rows="4" 
                  [(ngModel)]="nouvelleDemande.motif"
                  name="motif"
                  placeholder="Expliquez les raisons de votre demande..."
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"></textarea>
      </div>

      <div class="grid md:grid-cols-2 gap-6">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Montant demandé (€)</label>
          <input type="number" 
                 [(ngModel)]="nouvelleDemande.montantDemande"
                 name="montantDemande"
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Date souhaitée de début</label>
          <input type="date" 
                 [(ngModel)]="nouvelleDemande.dateDebut"
                 name="dateDebut"
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent">
        </div>
      </div>
    </div>

    <!-- Zone de téléchargement -->
    <div class="mb-8">
      <label class="block text-sm font-medium text-gray-700 mb-2">Documents justificatifs</label>
      <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center">
        <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
        <p class="text-gray-600 mb-2">Glissez vos fichiers ici ou cliquez pour sélectionner</p>
        <p class="text-sm text-gray-500">PDF, JPG, PNG - Maximum 10MB par fichier</p>
        <button type="button" 
                class="mt-4 bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium transition-colors">
          <i class="fas fa-folder-open mr-2"></i>Parcourir les fichiers
        </button>
      </div>
    </div>

    <!-- Boutons d'action -->
    <div class="flex justify-between">
      <a routerLink="/user/prestations"
         class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition-colors">
        <i class="fas fa-arrow-left mr-2"></i>Retour
      </a>
      <button (click)="continuerFormulaire()"
              class="px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-lg font-medium transition-colors">
        Continuer <i class="fas fa-arrow-right ml-2"></i>
      </button>
    </div>
  </div>

  <!-- Suivi des demandes existantes -->
  <div>
    <h2 class="text-2xl font-bold text-gray-900 mb-6">Suivi de mes demandes</h2>
    <div class="space-y-6">
      <div *ngFor="let demande of demandesExistantes" class="bg-white rounded-2xl card-shadow p-6">
        <div class="flex items-center justify-between mb-4">
          <div>
            <h3 class="text-lg font-semibold text-gray-900">{{ demande.titre }}</h3>
            <p class="text-sm text-gray-600">Demande n°{{ demande.id }} - Déposée le {{ demande.date }}</p>
          </div>
          <span class="px-3 py-1 rounded-full text-sm font-medium" [ngClass]="demande.couleurStatut">
            {{ demande.statut }}
          </span>
        </div>
        
        <!-- Timeline -->
        <div class="flex items-center mb-4">
          <div *ngFor="let etape of demande.etapes; let i = index; let last = last" class="flex items-center">
            <div class="w-6 h-6 rounded-full flex items-center justify-center"
                 [class]="i < Math.floor(demande.progression / 25) ? 'bg-green-500' : 'bg-gray-300'">
              <i [class]="i < Math.floor(demande.progression / 25) ? 'fas fa-check text-white text-xs' : 'fas fa-clock text-gray-500 text-xs'"></i>
            </div>
            <span class="text-sm text-gray-600 ml-2" 
                  [class]="!last ? 'mr-4' : ''">{{ etape }}</span>
            <div *ngIf="!last" class="flex-1 h-px mx-4"
                 [class]="i < Math.floor(demande.progression / 25) - 1 ? 'bg-green-500' : 'bg-gray-300'"></div>
          </div>
        </div>
        
        <div class="flex items-center justify-between">
          <p class="text-sm text-gray-600">Progression : {{ demande.progression }}% - Dernière mise à jour il y a 2 heures</p>
          <button (click)="voirDetails(demande.id)"
                  class="text-primary-600 hover:text-primary-700 text-sm font-medium">
            <i class="fas fa-eye mr-1"></i>Voir les détails
          </button>
        </div>
      </div>
    </div>
  </div>
</div>